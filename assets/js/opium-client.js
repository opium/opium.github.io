'use strict';

var opiumRestClient = angular.module('opiumRestClient', ['restangular']);

// config and redirect on login on error
opiumRestClient.run(['Restangular', '$location', 'localStorageService', function (Restangular, $location, localStorageService) {
  Restangular.setBaseUrl(API_URL + '/v1');

  var auth = localStorageService.get('Authorization');

  Restangular.setDefaultHeaders({
    Authorization: auth,
    'X-Device-Width': window.innerWidth,
    'X-Device-Height': window.innerHeight
  });

  Restangular.setErrorInterceptor(function (response, deferred, responseHandler) {
    if (response.status === 401) {
      $location.path('/login');
    }
  });
}]);

opiumRestClient.factory('Album', ['Restangular', function (Restangular) {
  return Restangular.service('directories');
}]);

opiumRestClient.factory('Photo', ['Restangular', function (Restangular) {
  return Restangular.service('files');
}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9waXVtLWNsaWVudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQU0sZUFBZSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDOzs7QUFHM0UsZUFBZSxDQUFDLEdBQUcsQ0FBQyxVQUFTLFdBQVcsRUFBRSxTQUFTLEVBQUUsbUJBQW1CLEVBQUU7QUFDeEUsYUFBVyxDQUFDLFVBQVUsQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDLENBQUM7O0FBRXhDLE1BQUksSUFBSSxHQUFHLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQzs7QUFFcEQsYUFBVyxDQUFDLGlCQUFpQixDQUFDO0FBQzVCLGlCQUFhLEVBQUUsSUFBSTtBQUNuQixvQkFBZ0IsRUFBRSxNQUFNLENBQUMsVUFBVTtBQUNuQyxxQkFBaUIsRUFBRSxNQUFNLENBQUMsV0FBVztHQUN0QyxDQUFDLENBQUM7O0FBRUgsYUFBVyxDQUFDLG1CQUFtQixDQUFDLFVBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUs7QUFDdkUsUUFBSSxRQUFRLENBQUMsTUFBTSxLQUFLLEdBQUcsRUFBRTtBQUMzQixlQUFTLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0tBQzFCO0dBQ0YsQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDOztBQUVILGVBQWUsQ0FBQyxPQUFPLENBQ3JCLE9BQU8sRUFDUCxVQUFTLFdBQVcsRUFBRTtBQUNwQixTQUFPLFdBQVcsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7Q0FDM0MsQ0FFRixDQUFDOztBQUVGLGVBQWUsQ0FBQyxPQUFPLENBQ3JCLE9BQU8sRUFDUCxVQUFTLFdBQVcsRUFBRTtBQUNwQixTQUFPLFdBQVcsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7Q0FDckMsQ0FFRixDQUFDIiwiZmlsZSI6Im9waXVtLWNsaWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG9waXVtUmVzdENsaWVudCA9IGFuZ3VsYXIubW9kdWxlKCdvcGl1bVJlc3RDbGllbnQnLCBbJ3Jlc3Rhbmd1bGFyJ10pO1xuXG4vLyBjb25maWcgYW5kIHJlZGlyZWN0IG9uIGxvZ2luIG9uIGVycm9yXG5vcGl1bVJlc3RDbGllbnQucnVuKGZ1bmN0aW9uKFJlc3Rhbmd1bGFyLCAkbG9jYXRpb24sIGxvY2FsU3RvcmFnZVNlcnZpY2UpIHtcbiAgUmVzdGFuZ3VsYXIuc2V0QmFzZVVybChBUElfVVJMICsgJy92MScpO1xuXG4gIGxldCBhdXRoID0gbG9jYWxTdG9yYWdlU2VydmljZS5nZXQoJ0F1dGhvcml6YXRpb24nKTtcblxuICBSZXN0YW5ndWxhci5zZXREZWZhdWx0SGVhZGVycyh7XG4gICAgQXV0aG9yaXphdGlvbjogYXV0aCxcbiAgICAnWC1EZXZpY2UtV2lkdGgnOiB3aW5kb3cuaW5uZXJXaWR0aCxcbiAgICAnWC1EZXZpY2UtSGVpZ2h0Jzogd2luZG93LmlubmVySGVpZ2h0XG4gIH0pO1xuXG4gIFJlc3Rhbmd1bGFyLnNldEVycm9ySW50ZXJjZXB0b3IoKHJlc3BvbnNlLCBkZWZlcnJlZCwgcmVzcG9uc2VIYW5kbGVyKSA9PiB7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5vcGl1bVJlc3RDbGllbnQuZmFjdG9yeShcbiAgJ0FsYnVtJyxcbiAgZnVuY3Rpb24oUmVzdGFuZ3VsYXIpIHtcbiAgICByZXR1cm4gUmVzdGFuZ3VsYXIuc2VydmljZSgnZGlyZWN0b3JpZXMnKTtcbiAgfVxuXG4pO1xuXG5vcGl1bVJlc3RDbGllbnQuZmFjdG9yeShcbiAgJ1Bob3RvJyxcbiAgZnVuY3Rpb24oUmVzdGFuZ3VsYXIpIHtcbiAgICByZXR1cm4gUmVzdGFuZ3VsYXIuc2VydmljZSgnZmlsZXMnKTtcbiAgfVxuXG4pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9